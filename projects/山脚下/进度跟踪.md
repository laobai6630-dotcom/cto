📊 山脚下项目 - 进度跟踪表
项目名称：山脚下 - A股"山脚下"形态股票精准筛选系统
项目版本：v2.0
最后更新时间：2025-12-17
项目状态：规划完成，待启动（阶段0）
负责人：项目经理

📌 项目快速入口
核心文档
🔗 完整项目计划 - 项目详细规划书（8000+行）
📍 项目计划快速导航 - 按功能快速查找
⚡ 新聊天快速恢复 - 新窗口秒速恢复清单
👥 员工配置 - 4个职位权限配置
GitHub仓库
项目文件夹：https://github.com/laobai6630-dotcom/cto/tree/main/projects/%E5%B1%B1%E8%84%9A%E4%B8%8B
🎯 项目概述
项目目标
建立A股"山脚下"形态股票精准筛选系统，通过：

识别30个交易日涨幅>50%的成功样本
提取88个特征（含对照组对比）
使用3模型集成进行相似度筛选（50%→40%→30%递进）
建立对照组验证特征稳健性
30天动态跟踪和策略优化
核心改动（v2.0）
| # | 改动项 | 初稿 | 本稿 | 影响 |
|---|--------|------|------|------|
| 1 | 特征数量 | 70-80个 | 88个 | ML模型训练 |
| 2 | 数据保留期 | 30天 | 180个交易日 ✅ | 数据采集、历史查询 |
| 3 | 特征时间窗口 | 30日 | 20个交易日 ✅ | 特征工程 |
| 4 | 对照组 | 无 | 跌幅前20名 ✅ | 相似度筛选、Dashboard |
| 5 | 筹码分布 | 简述 | 独立维度（权重0.2） | ML模型 |
| 6 | 消息面分析 | 人工 | 新增员工职位 | 权重调整 |
| 7 | GitHub触发 | 定时 | 事件驱动 | workflow配置 |
| 8 | 密码保护 | 无 | 必需 | 网页认证 |
| 9 | 监督员工 | 无 | 新增职位 | 项目监督 |

🔗 工作规范与方法
GitHub项目文件夹标准路径
如需链接到 projects/山脚下 GitHub仓库文件夹：

https://github.com/laobai6630-dotcom/cto/tree/main/projects/%E5%B1%B1%E8%84%9A%E4%B8%8B
GitHub文件直接编辑方法 ⭐
✅ 已记住！ 当遇到以下情况时，直接用网页编辑：

✅ 需要更新GitHub文件内容
✅ 改动较大（如替换整个文件）
✅ 内容已经准备好（本地或对话中）
操作步骤：

点击GitHub该文件的铅笔图标（或直接用编辑链接）
清空现有内容，粘贴新内容
填写Commit message
提交
重要提示：不会让AI上传，因为AI可能理解错误。 这样既快速、又准确、还避免了AI误操作。👍

长上下文内容发送规则 ⭐
发送长篇幅内容时：

✅ 每部分结尾标注"此部分最后一行"内容
✅ 下一部分开头加上"上部分最后一行"
✅ 确保复制的内容完整，无遗漏
📅 4阶段实现进度
阶段总览
| 阶段 | 名称 | 周期 | 主要任务 | 当前状态 |
|------|------|------|--------|--------|
| 0 | 规划完成 | 已完成 | 项目计划v2.0制定 | ✅ 完成 |
| 1 | 基础框架搭建 | 第1-2周 | 数据采集、特征提取、ML模型 | ⏳ 待启动 |
| 2 | 相似度筛选+对照组 | 第3周 | 筛选、对照组分析、30天跟踪 | ⏳ 待启动 |
| 3 | 高级功能+工作流 | 第4周 | Dashboard、GitHub workflow、监督报告 | ⏳ 待启动 |
| 4 | 优化+文档+上线 | 第5周+ | 性能优化、文档完善、项目上线 | ⏳ 待启动 |

阶段0：规划完成 ✅
期间：2025-12-15 至 2025-12-17
完成内容：

✅ 制定项目计划v2.0（包含对照组功能）
✅ 整理88个特征体系
✅ 设计对照组分析方案
✅ 规划4个员工职位和权限
✅ 上传项目计划到GitHub
✅ 创建项目导航索引
下阶段预计启动时间：2025-12-18

🎯 18步实现清单
| # | 实现步骤 | 完成标准 | 责任人 | 状态 | 确认 |
|---|---------|--------|--------|------|------|
| 1 | 数据采集框架 | 4个采集程序正常运行 | AI Agent | ⏳ | ☐ |
| 2 | 触发机制 | github_trigger.py可成功触发 | AI Agent | ⏳ | ☐ |
| 3 | 特征提取 | 134原始+10AI+10筹码特征完整 | AI Agent | ⏳ | ☐ |
| 4 | 特征工程 | 88特征标准化和重要性排名完成 | AI Agent | ⏳ | ☐ |
| 5 | ML模型 | 3模型集成，精度>0.85 | AI Agent | ⏳ | ☐ |
| 6 | 对照组识别 | 成功识别跌幅前20名股票 | AI Agent | ⏳ | ☐ |
| 7 | 对照组特征 | 对照组88特征提取完整 | AI Agent | ⏳ | ☐ |
| 8 | 对比分析 | 分离度评分>0.8 | AI Agent | ⏳ | ☐ |
| 9 | 相似度筛选 | 候选筛选完成，支持递进 | AI Agent | ⏳ | ☐ |
| 10 | 30天跟踪 | 跟踪数据完整，报告生成 | AI Agent | ⏳ | ☐ |
| 11 | Dashboard基础 | 候选+对照+参数面板完成 | AI Agent | ⏳ | ☐ |
| 12 | 密码保护 | 无密码查看，密码后修改 | AI Agent | ⏳ | ☐ |
| 13 | 双语支持 | 所有按钮和页面中英双语 | AI Agent | ⏳ | ☐ |
| 14 | GitHub工作流 | 5个yml完整配置 | AI Agent | ⏳ | ☐ |
| 15 | 自托管Runner | Runner安装完成，可执行 | 项目经理 | ⏳ | ☐ |
| 16 | 监督报告 | supervisor_report.json生成 | AI Agent | ⏳ | ☐ |
| 17 | 文档完善 | 所有手册已完成 | AI Agent | ⏳ | ☐ |
| 18 | 项目上线 | 项目可稳定运维 | 项目经理 | ⏳ | ☐ |
📊 阶段1详细进度（基础框架搭建）
目标：完成数据采集、特征提取、基础ML模型
周期：第1-2周
负责人：AI Agent（代码）+ 项目经理（确认）

任务清单
🔧 数据采集模块
[ ] collect_daily_minute.py - 日线+分钟线采集

输出：daily_data.csv（最新30交易日）
输出：daily_data_backup.csv（固定备份）
输出：daily_data_backup_YYYY-MM-DD.csv（历史备份，保留180日）
调度：每日09:00 (APScheduler)
状态：⏳ 待开发
[ ] collect_weekly.py - 周线采集

输出：weekly_data.csv（最近52周）
调度：每周一16:00
状态：⏳ 待开发
[ ] collect_monthly.py - 月线采集

输出：monthly_data.csv（最近60个月）
调度：每月1日16:00
状态：⏳ 待开发
[ ] collect_financial.py - 财务数据采集

输出：profit_data.csv、balance_data.csv等（8季度）
调度：每交易日10:00
状态：⏳ 待开发
[ ] scheduler_main.py - 主调度程序

功能：集成所有APScheduler任务
状态：⏳ 待开发
确认标准：项目经理确认→数据采集成功，文件完整 ✅

🧬 特征提取模块
[ ] feature_extraction.py - 提取134个原始特征

时间窗口：从拉升日前一天向前20个交易日 ✅ 新规则
数据来源：daily_data.csv + 历史备份
输出：raw_features.csv
状态：⏳ 待开发
[ ] ai_feature_synthesis.py - 合成10个AI特征

特征：资金流、技术形态、市场情绪等
权重：最高优先级（1.5倍）
输出：ai_synthetic_features.csv
状态：⏳ 待开发
[ ] chip_distribution.py - 计算10个筹码特征

特征：集中度、锁定率、成本均线等
权重：0.2（在相似度筛选中）
输出：chip_features.csv、cost_distribution.csv
状态：⏳ 待开发
[ ] feature_normalization.py - 标准化88个特征

方法：StandardScaler
输出：normalized_features.csv、all_features_88.csv
状态：⏳ 待开发
[ ] feature_importance.py - 计算特征重要性

输出：feature_importance_ranking.csv
展示：Dashboard特征重要性板块
状态：⏳ 待开发
确认标准：项目经理确认→特征提取无误，88个特征完整 ✅

🤖 机器学习模块
[ ] model_training.py - 训练3个基础模型

模型1：逻辑回归 (Logistic Regression)
模型2：随机森林 (Random Forest)
模型3：梯度提升 (XGBoost/LightGBM)
输出：model_lr.pkl、model_rf.pkl、model_gb.pkl
状态：⏳ 待开发
[ ] model_ensemble.py - 集成3个模型

权重：LR 0.4 + RF 0.3 + GB 0.3
输出：model_ensemble.pkl、model_metrics.json
状态：⏳ 待开发
[ ] model_evaluation.py - 模型评估

评估指标：Accuracy、Precision、Recall、F1、AUC-ROC
交叉验证：5折
状态：⏳ 待开发
确认标准：项目经理确认→ML模型训练完成，精度>0.85 ✅

预期产出
✅ daily_data.csv（最新30交易日）
✅ daily_data_backup_YYYY-MM-DD.csv（历史备份×180日）
✅ weekly_data.csv、monthly_data.csv
✅ all_features_88.csv（88个特征）
✅ feature_importance_ranking.csv（特征排名）
✅ model_ensemble.pkl（集成模型）
✅ model_metrics.json（评估指标）
✅ 框架备份 v1.1
阶段确认
[ ] 项目经理确认：数据采集成功 ✅
[ ] 项目经理确认：特征提取无误，窗口为20日 ✅
[ ] 项目经理确认：ML模型训练完成 ✅
阶段1预计完成时间：2025-12-31

📊 阶段2详细进度（相似度筛选+对照组+跟踪）
目标：完成相似度筛选、对照组分析、30天跟踪、基础Dashboard
周期：第3周
负责人：AI Agent（代码）+ 项目经理（确认）

任务清单
🎯 对照组分析模块 ✅ 新增
[ ] identify_contrast_group.py - 识别对照组

功能：筛选30个交易日跌幅前20名的股票
输出：contrast_group_30d_drop_top20.csv
状态：⏳ 待开发
[ ] extract_contrast_features.py - 提取对照组特征

功能：为对照组生成相同的88个特征
时间窗口：同样从前一天向前推进 ✅
输出：contrast_group_features.csv
状态：⏳ 待开发
[ ] compare_contrast_vs_candidates.py - 对比分析

功能：对照组特征 vs 候选股票特征对比
输出指标：分离度（Separation Score）
作用：验证特征稳健性和区分度
输出：contrast_vs_candidates_comparison.json
状态：⏳ 待开发
确认标准：项目经理确认→对照组识别成功，分离度>0.8 ✅

🔗 相似度筛选模块
[ ] similarity_filter.py - 相似度筛选主程序

集成：ML模型预测（权重0.6）
集成：筹码分布评分（权重0.2）
集成：消息面权重（权重0.2）
集成：对照组对比结果 ✅
输出：candidates_50pct.csv、candidates_40pct.csv、candidates_30pct.csv
状态：⏳ 待开发
[ ] filtering_logic.py - 递进筛选逻辑

逻辑：先50% → 若无则40% → 若无则30%
参数可调：网页参数调整面板
状态：⏳ 待开发
确认标准：项目经理确认→候选股票数在预期范围 ✅

📈 跟踪与报告模块
[ ] track_candidates_30d.py - 30天跟踪

功能：跟踪候选股票30个交易日的表现
输出：active_tracking.json、tracking_history.csv
状态：⏳ 待开发
[ ] performance_evaluation.py - 效果评估

指标：成功率、平均涨幅、最高最低涨幅
输出：performance_report.csv
状态：⏳ 待开发
[ ] generate_daily_report.py - 日报生成

输出：daily_YYYY-MM-DD.md
状态：⏳ 待开发
[ ] generate_weekly_report.py - 周报生成

输出：weekly_YYYY-W##.md
状态：⏳ 待开发
[ ] generate_monthly_report.py - 月报生成

输出：monthly_YYYY-MM.csv
状态：⏳ 待开发
确认标准：项目经理确认→跟踪数据准确 ✅

🌐 Dashboard基础模块
[ ] index.html - 主Dashboard

板块1：概览指标（含对照组） ✅
板块2：候选股票列表
板块3：对照组展示 ✅
板块4：参数调整面板（基础版）
板块5：特征重要性排名
板块6：对比分析历史 ✅
状态：⏳ 待开发
[ ] dashboard.js - Dashboard逻辑

包含：对照组数据加载 ✅
包含：对照vs候选对比逻辑 ✅
状态：⏳ 待开发
[ ] assets/data/ - Dashboard数据文件

candidates_data.json
contrast_group_data.json ✅
contrast_vs_candidates_data.json ✅
tracking_data.json
feature_importance.json
状态：⏳ 待更新
确认标准：项目经理确认→Dashboard可正常显示对照组数据 ✅

预期产出
✅ contrast_group_30d_drop_top20.csv（对照组20只股票） ✅
✅ contrast_group_features.csv（对照组88特征） ✅
✅ contrast_vs_candidates_comparison.json（对比分析） ✅
✅ selection_candidates.csv（最终候选）
✅ active_tracking.json（跟踪数据）
✅ daily_*.md（日报）
✅ Dashboard网页（基础版，含对照组） ✅
✅ 框架备份 v1.2
阶段确认
[ ] 项目经理确认：候选股票数在预期范围 ✅
[ ] 项目经理确认：对照组成功识别20只股票 ✅
[ ] 项目经理确认：对照vs候选分离度>0.8 ✅
[ ] 项目经理确认：Dashboard可正常显示对照组数据 ✅
[ ] 项目经理确认：跟踪数据准确 ✅
阶段2预计完成时间：2026-01-07
